<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merchantee - Pricing Calculator</title>
    <!-- Načítanie Tailwind CSS pre rýchly a moderný styling (Dark Mode) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Nastavenie písma Inter a tmavého pozadia */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* GitHub Dark Mode background */
        }
        
        /* Vlastné štýly pre posuvníky, aby vyzerali ako moderné guľôčky */
        input[type='range'] {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: #374151; /* Tmavý track */
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        input[type='range']::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3B82F6; /* Default Blue Thumb */
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            transition: all 0.2s;
        }
        
        input[type='range']::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        /* Špecifické farby pre Allegro a Kaufland */
        #allegro::-webkit-slider-thumb {
            background: #FF6600; /* Allegro Orange */
        }
        #kaufland::-webkit-slider-thumb {
            background: #DC2626; /* Kaufland Red */
        }

        /* Firefox Thumb styles */
        input[type='range']::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3B82F6;
            border: none;
        }
        #allegro::-moz-range-thumb { background: #FF6600; }
        #kaufland::-moz-range-thumb { background: #DC2626; }
        
        /* Štýl pre logo */
        #logo-container {
            height: 36px;
        }
    </style>
</head>
<body class="p-8 text-white min-h-screen">

    <div class="max-w-4xl mx-auto">
        <!-- Hlavička s Logom a Názvom -->
        <header class="flex items-center justify-between pb-6 border-b border-gray-700 mb-8">
            <div id="logo-container">
                <img src="https://app.merchantee.io/images/merchantee_darkmode_logo.png" alt="Merchantee Logo" class="h-full">
            </div>
            <h1 class="text-3xl font-extrabold text-blue-400">Merchantee - Pricing Calculator</h1>
        </header>

        <!-- Hlavný kontajner pre metriky a výsledky -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Stĺpec 1: Dynamický Pricing (Produkty) -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700 col-span-1">
                <h3 class="text-xl font-semibold mb-4 text-blue-400">1. Základ pre Dynamický Pricing</h3>
                
                <div class="slider-group mb-4">
                    <label for="products" class="block text-sm font-medium mb-1">Počet produktov v katalógu</label>
                    <input type="range" id="products" min="500" max="30000" step="500" value="500">
                    <div class="text-lg mt-2 flex justify-between">
                        <span id="products-value" class="font-bold text-gray-300">500</span> ks
                        <span id="products-tier" class="text-xs text-gray-400 bg-gray-700 py-0.5 px-2 rounded">Tier: 500 - 2,000</span>
                    </div>
                </div>

                <div class="mt-4 p-3 bg-gray-700 rounded-lg text-center">
                    <p class="text-sm text-gray-400">Cena za 1 Dynamic Pricing Market (DPUC):</p>
                    <span id="dpuc-cost" class="text-2xl font-extrabold text-green-400">49,00 €</span>
                </div>
            </div>

            <!-- Stĺpec 2: Dynamic Pricing Markets (Allegro a Kaufland) -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700 col-span-1">
                <h3 class="text-xl font-semibold mb-4 text-blue-400">2. Počet Marketov (DP)</h3>
                
                <!-- Allegro Slider -->
                <div class="slider-group mb-6 p-3 border border-orange-500/50 rounded-lg bg-gray-700/30">
                    <div class="flex items-center justify-between mb-2">
                        <label for="allegro" class="text-sm font-medium flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 text-orange-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-7-8a7 7 0 1114 0 7 7 0 01-14 0zM8.28 7.37a.75.75 0 00-1.06 1.06L9.94 11l-2.72 2.72a.75.75 0 101.06 1.06L11 12.06l2.72 2.72a.75.75 0 101.06-1.06L12.06 11l2.72-2.72a.75.75 0 10-1.06-1.06L11 9.94l-2.72-2.72z" clip-rule="evenodd" fill="#FF6600"/></svg>
                            Allegro Markety (1-4)
                        </label>
                        <span id="allegro-value" class="text-lg font-bold text-orange-400">1</span>
                    </div>
                    <input type="range" id="allegro" min="1" max="4" step="1" value="1">
                </div>

                <!-- Kaufland Slider -->
                <div class="slider-group mb-6 p-3 border border-red-500/50 rounded-lg bg-gray-700/30">
                    <div class="flex items-center justify-between mb-2">
                        <label for="kaufland" class="text-sm font-medium flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 text-red-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.5 7.5a.5.5 0 00-1 0v4.5a.5.5 0 001 0V7.5zm3.5 0a.5.5 0 00-1 0v4.5a.5.5 0 001 0V7.5z" clip-rule="evenodd" fill="#DC2626"/></svg>
                            Kaufland Markety (1-9)
                        </label>
                        <span id="kaufland-value" class="text-lg font-bold text-red-400">1</span>
                    </div>
                    <input type="range" id="kaufland" min="1" max="9" step="1" value="1">
                </div>
                
                <div class="mt-4 p-3 bg-gray-700 rounded-lg text-center">
                    <p class="text-sm text-gray-400">Celkový počet marketov:</p>
                    <span id="markets-total" class="text-2xl font-extrabold text-blue-400">2</span> ks
                </div>
            </div>

            <!-- Stĺpec 3: Základná cena systému (Objednávky) & Výsledok -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700 col-span-1">
                <h3 class="text-xl font-semibold mb-4 text-blue-400">3. Základná Cena Systému (BSP)</h3>
                
                <div class="slider-group mb-4">
                    <label for="orders" class="block text-sm font-medium mb-1">Počet objednávok mesačne (PZ)</label>
                    <input type="range" id="orders" min="1" max="10000" step="1" value="1">
                    <div class="text-lg mt-2 flex justify-between">
                        <span id="orders-value" class="font-bold text-gray-300">1</span> ks
                        <span id="orders-tier" class="text-xs text-gray-400 bg-gray-700 py-0.5 px-2 rounded">Tier: 0 - 100</span>
                    </div>
                </div>

                <div class="mt-4 p-3 bg-gray-700 rounded-lg text-center">
                    <p class="text-sm text-gray-400">Základná Cena Systému:</p>
                    <span id="bsp-cost" class="text-2xl font-extrabold text-green-400">149,00 €</span>
                </div>
            </div>
        </div>

        <!-- Sekcia Súhrn Ceny -->
        <div class="mt-10 p-8 bg-gray-900 border-2 border-green-500 rounded-xl shadow-2xl">
            <h3 class="text-2xl font-bold mb-4 text-green-400">Cenový Súhrn (Bez DPH)</h3>
            <div id="pricing-summary" class="space-y-4">
                
                <!-- Cena po prvom mesiaci -->
                <div class="bg-gray-800 p-4 rounded-lg flex justify-between items-center border-l-4 border-blue-400">
                    <div>
                        <p class="font-bold text-lg">Mesačná cena po 1. mesiaci:</p>
                        <p class="text-sm text-gray-400">Dynamický Pricing + Základná Cena Systému</p>
                    </div>
                    <span id="total-price" class="text-4xl font-extrabold text-white">0,00 €</span>
                </div>
                
                <!-- Cena za prvý mesiac (AKCIA) -->
                <div class="bg-gray-800 p-4 rounded-lg flex justify-between items-center border-l-4 border-yellow-400">
                    <div>
                        <p class="font-bold text-lg text-yellow-400">Cena za PRVÝ MESIAC (AKCIA):</p>
                        <p class="text-sm text-gray-400">Dynamický Pricing na 13 Marketoch ZDARMA</p>
                    </div>
                    <span id="first-month-price" class="text-4xl font-extrabold text-yellow-400">0,00 €</span>
                </div>

                <!-- Detaily výpočtu -->
                <div class="pt-4 border-t border-gray-700">
                    <h4 class="text-xl font-semibold mb-2 text-blue-300">Detaily Výpočtu:</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                        <li class="flex justify-between">
                            <span>Základná Cena Systému (BSP):</span>
                            <span id="detail-bsp" class="font-semibold">0,00 €</span>
                        </li>
                        <li class="flex justify-between">
                            <span>Cena za Dynamický Pricing (DPUC $\times$ Markety):</span>
                            <span id="detail-dynamic-pricing" class="font-semibold">0,00 €</span>
                        </li>
                        <li class="flex justify-between font-bold text-green-400">
                            <span>Mesačný poplatok (Po 1. mesiaci):</span>
                            <span id="detail-total" class="font-extrabold">0,00 €</span>
                        </li>
                    </ul>
                </div>

                 <!-- Zadarmo hodnota -->
                <div class="mt-4 pt-4 border-t border-gray-700">
                    <h4 class="text-xl font-semibold mb-2 text-yellow-300">Hodnota zadarmo (prvý mesiac):</h4>
                    <p class="text-sm text-gray-400 mb-2">Dynamický Pricing na 13 marketoch (max 2000 produktov) máte v prvom mesiaci zadarmo.</p>
                     <li class="flex justify-between font-bold text-yellow-400 list-none">
                        <span>Hodnota ZDARMA (13 Marketov $\times$ 49 €):</span>
                        <span id="detail-value-free" class="font-extrabold">0,00 €</span>
                    </li>
                </div>

            </div>
        </div>

    </div>

    <script>
        // Nastavenie pre formátovanie meny s 2 desatinnými miestami a čiarkou
        const formatPrice = (price) => {
            if (typeof price === 'number') {
                return price.toFixed(2).replace('.', ',').toLocaleString('sk-SK') + ' €';
            }
            return price; // Pre "Individuálne"
        };
        
        // --- LOGIKA CENOVÝCH TIERov ---
        
        /**
         * Určuje cenu Dynamic Pricing Unit Cost (DPUC) na základe počtu produktov.
         * Produkty (slider 500-30000, krok 500)
         */
        function getDynamicPricingUnitCost(products) {
            if (products <= 2000) return { cost: 49, tier: "500 - 2,000" };
            if (products <= 5000) return { cost: 99, tier: "2,001 - 5,000" };
            if (products <= 10000) return { cost: 149, tier: "5,001 - 10,000" };
            if (products <= 20000) return { cost: 199, tier: "10,001 - 20,000" };
            return { cost: 249, tier: "20,001 - 30,000" };
        }

        /**
         * Určuje Základnú Cenu Systému (BSP) na základe počtu objednávok.
         */
        function getBaseSystemPrice(orders) {
            if (orders <= 100) return { cost: 149, tier: "1 - 100" };
            if (orders <= 5000) return { cost: 249, tier: "101 - 5,000" };
            return { cost: 'Individuálne', tier: "> 5,000" };
        }

        // --- ZÍSKANIE ELEMENTOV ---
        const productsSlider = document.getElementById('products');
        const allegroSlider = document.getElementById('allegro');
        const kauflandSlider = document.getElementById('kaufland');
        const ordersSlider = document.getElementById('orders');

        const elements = {
            productsValue: document.getElementById('products-value'),
            productsTier: document.getElementById('products-tier'),
            dpucCost: document.getElementById('dpuc-cost'),
            allegroValue: document.getElementById('allegro-value'),
            kauflandValue: document.getElementById('kaufland-value'),
            marketsTotal: document.getElementById('markets-total'),
            ordersValue: document.getElementById('orders-value'),
            ordersTier: document.getElementById('orders-tier'),
            bspCost: document.getElementById('bsp-cost'),
            totalPrice: document.getElementById('total-price'),
            firstMonthPrice: document.getElementById('first-month-price'),
            detailBsp: document.getElementById('detail-bsp'),
            detailDynamicPricing: document.getElementById('detail-dynamic-pricing'),
            detailTotal: document.getElementById('detail-total'),
            detailValueFree: document.getElementById('detail-value-free'),
        };

        // --- HLAVNÁ KALKULAČNÁ FUNKCIA ---
        function updatePricing() {
            // Získanie hodnôt
            const products = parseInt(productsSlider.value);
            const allegro = parseInt(allegroSlider.value);
            const kaufland = parseInt(kauflandSlider.value);
            const orders = parseInt(ordersSlider.value);

            // 1. DPUC (Dynamic Pricing Unit Cost) podľa produktov
            const dpucResult = getDynamicPricingUnitCost(products);
            const dpuc = dpucResult.cost;
            const dpucTier = dpucResult.tier;
            
            // 2. Total Markets (TM) - Allegro + Kaufland
            const totalMarkets = allegro + kaufland;

            // 3. BSP (Base System Price) podľa objednávok
            const bspResult = getBaseSystemPrice(orders);
            const bsp = bspResult.cost;
            const bspTier = bspResult.tier;

            // --- VÝPOČTY CIEN ---
            
            // Cena za Dynamický Pricing (Subtotal 1)
            const dynamicPricingCost = totalMarkets * dpuc; // TM * DPUC

            // Celková cena po 1. mesiaci (Subtotal 1 + BSP)
            let totalPriceAfterFirstMonth;
            if (bsp === 'Individuálne') {
                totalPriceAfterFirstMonth = dynamicPricingCost; // len dynamický pricing, BSP je individuálny
            } else {
                totalPriceAfterFirstMonth = dynamicPricingCost + bsp;
            }

            // Cena za PRVÝ MESIAC (BSP, Dynamický Pricing je ZDARMA)
            const firstMonthPrice = bsp; 

            // Hodnota ZDARMA (13 Marketov * 49€ (limit 2000 produktov))
            const valueFree = 13 * 49;

            // --- AKTUALIZÁCIA UI ---

            // Aktualizácia hodnôt posuvníkov
            elements.productsValue.textContent = products.toLocaleString('sk-SK');
            elements.productsTier.textContent = `Tier: ${dpucTier}`;
            elements.dpucCost.textContent = formatPrice(dpuc);

            elements.allegroValue.textContent = allegro;
            elements.kauflandValue.textContent = kaufland;
            elements.marketsTotal.textContent = totalMarkets;

            elements.ordersValue.textContent = orders.toLocaleString('sk-SK');
            elements.ordersTier.textContent = `Tier: ${bspTier}`;
            elements.bspCost.textContent = formatPrice(bsp);

            // Aktualizácia Celkového Súhrnu
            elements.totalPrice.textContent = formatPrice(totalPriceAfterFirstMonth);
            elements.firstMonthPrice.textContent = formatPrice(firstMonthPrice);

            // Aktualizácia Detailov Výpočtu
            elements.detailBsp.textContent = formatPrice(bsp);
            
            if (bsp === 'Individuálne') {
                elements.detailBsp.classList.add('text-red-400');
            } else {
                elements.detailBsp.classList.remove('text-red-400');
            }
            
            elements.detailDynamicPricing.textContent = `${totalMarkets}x ${formatPrice(dpuc)} = ${formatPrice(dynamicPricingCost)}`;
            elements.detailTotal.textContent = formatPrice(totalPriceAfterFirstMonth);
            elements.detailValueFree.textContent = formatPrice(valueFree);
        }

        // Pripojenie poslucháčov udalostí ku všetkým posuvníkom
        const sliders = [productsSlider, allegroSlider, kauflandSlider, ordersSlider];
        sliders.forEach(slider => {
            slider.addEventListener('input', updatePricing);
        });

        // Inicializácia kalkulačky pri načítaní stránky
        updatePricing();
    </script>

</body>
</html>
